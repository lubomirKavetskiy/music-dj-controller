(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{111:function(e,a,t){e.exports=t.p+"static/media/dj_girl.66f28e11.jpg"},117:function(e,a,t){e.exports=t(302)},152:function(e,a,t){},207:function(e,a,t){},237:function(e,a,t){},296:function(e,a,t){},298:function(e,a,t){},300:function(e,a,t){},302:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),c=t(20),o=t.n(c),l=t(37),s=t(38),i=t(21),u=t(103),d=t(104),m=t.n(d),p=t(17),k=t(19),T=Object.freeze({UPLOAD_PAGE_ROUTE:"/upload",DJ_CONTROLLER_PAGE_ROUTE:"/dj-controller",PLAYBACK_RATE_VALUES:[.5,1,1.5],PLAYERS:[{id:1},{id:2},{id:3}]}),E={},f=!0,y=!1,h=void 0;try{for(var v,b=T.PLAYERS[Symbol.iterator]();!(f=(v=b.next()).done);f=!0){var O=v.value;E[O.id]={uploading:!1,data:[]}}}catch(Ke){y=!0,h=Ke}finally{try{f||null==b.return||b.return()}finally{if(y)throw h}}var P={commonVolume:100},_=!0,C=!1,S=void 0;try{for(var g,j=T.PLAYERS[Symbol.iterator]();!(_=(g=j.next()).done);_=!0){var N=g.value;P=Object.assign(P,Object(p.a)({},N.id,{currentTrackIndex:0,isPlaying:!1,currentTrackPosition:0,currentTrackSpeed:1,currentTrackVolume:100}))}}catch(Ke){C=!0,S=Ke}finally{try{_||null==j.return||j.return()}finally{if(C)throw S}}var R=Object(i.c)({router:s.c,tracks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,a=arguments.length>1?arguments[1]:void 0,t=a.type,r=a.payload,n=a.playerId;switch(t){case"TRACKS_UPLOAD_START":return Object(k.a)({},e,Object(p.a)({},n,Object.assign({},e[n],{uploading:!0})));case"TRACKS_UPLOAD_END":return Object(k.a)({},e,Object(p.a)({},n,{uploading:!1,data:e[n].data.concat(r)}));case"DELETE_TRACK":return Object(k.a)({},e,Object(p.a)({},n,Object.assign({},e.playerId,{data:e[n].data.filter(function(e,a,t){return t.indexOf(e)!==r})})));default:return e}},players:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,a=arguments.length>1?arguments[1]:void 0,t=a.type,r=a.payload,n=a.playerId;switch(t){case"SET_CURRENT_TRACK_INDEX":return Object(k.a)({},e,Object(p.a)({},n,Object.assign({},e[n],{currentTrackIndex:r})));case"RESET_PLAYERS":return Object(k.a)({},P);case"TO_PLAY":return Object(k.a)({},e,Object(p.a)({},n,Object.assign({},e[n],{isPlaying:!0})));case"TO_PAUSE":return Object(k.a)({},e,Object(p.a)({},n,Object.assign({},e[n],{isPlaying:!1})));case"SET_CURRENT_TRACK_POSITION":return Object(k.a)({},e,Object(p.a)({},n,Object.assign({},e[n],{currentTrackPosition:r})));case"SET_CURRENT_TRACK_SPEED":return Object(k.a)({},e,Object(p.a)({},n,Object.assign({},e[n],{currentTrackSpeed:r})));case"SET_CURRENT_TRACK_VOLUME":return Object(k.a)({},e,Object(p.a)({},n,Object.assign({},e[n],{currentTrackVolume:r})));case"SET_COMMON_VOLUME":return Object(k.a)({},e,{commonVolume:r});default:return e}}}),A=m()(),I=[u.a,Object(s.b)(A)],U=i.d.apply(void 0,[i.a.apply(void 0,I)].concat([])),L=Object(i.e)(R,{},U),w=t(23),D=t(24),x=t(26),V=t(25),M=t(27),K=t(306),Y=t(305),F=t(304),G=t(36),J=t.n(G),z=t(110),B=t(40),X=t.n(B),q=t(22),W=t.n(q),H=t(108),Q=t.n(H),Z=t(16),$=t.n(Z),ee=t(109),ae=t.n(ee),te=t(115),re=t(52),ne=t.n(re),ce=t(7),oe=t.n(ce),le=(t(152),function(e){function a(){return Object(w.a)(this,a),Object(x.a)(this,Object(V.a)(a).apply(this,arguments))}return Object(M.a)(a,e),Object(D.a)(a,[{key:"handleDrop",value:function(e){var a=this.props,t=a.tracks,r=a.tracksUploadStart,n=a.tracksUploadEnd,c=a.playerId,o=t[c].data.map(function(e){return e.track.name}),l=e.filter(function(e){return-1===o.indexOf(e.name)}),s=function(e){return new Promise(function(a,t){var r=new FileReader,n=e;r.onload=function(e){return a({track:n,audio:new Audio(e.target.result)})},r.onerror=r.onabort=function(){return t(new Error("error"))},r.readAsDataURL(n)})};l.length&&(r(c),Promise.all(l.map(s)).then(function(e){return n(c,e)},function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this.props,a=e.tracks[e.playerId].uploading;return n.a.createElement("div",{className:"dropzone-wrapper"},n.a.createElement(te.a,{onDrop:this.handleDrop.bind(this),accept:"audio/*",disabled:a},n.a.createElement($.a,{className:oe()("icon-cloud-upload fas fa-cloud-upload-alt"),color:"primary"}),n.a.createElement("p",null,"Drag and drop"),n.a.createElement("p",{className:"note-text"},"*only audio format"),a&&n.a.createElement("div",{className:"loader-container"},n.a.createElement(ne.a,{type:"Circles",color:"#008000",height:"100",width:"100"}))))}}]),a}(r.Component)),se=function(e){return{type:"TRACKS_UPLOAD_START",playerId:e}},ie=function(e,a){return{type:"TRACKS_UPLOAD_END",payload:a,playerId:e}},ue=function(e,a){return{type:"DELETE_TRACK",payload:a,playerId:e}},de=function(e,a){return{type:"SET_CURRENT_TRACK_INDEX",payload:a,playerId:e}},me=function(){return{type:"RESET_PLAYERS"}},pe=function(e){return{type:"TO_PLAY",playerId:e}},ke=function(e){return{type:"TO_PAUSE",playerId:e}},Te=function(e,a){return{type:"SET_CURRENT_TRACK_POSITION",payload:a,playerId:e}},Ee=function(e,a){return{type:"SET_CURRENT_TRACK_SPEED",payload:a,playerId:e}},fe=function(e,a){return{type:"SET_CURRENT_TRACK_VOLUME",payload:a,playerId:e}},ye=function(e){return{type:"SET_COMMON_VOLUME",payload:e}},he=t(107),ve=function(e){var a=e.tracks,t=!1,r=!0,n=!1,c=void 0;try{for(var o,l=T.PLAYERS[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){if(a[o.value.id].data.length){t=!0;break}}}catch(Ke){n=!0,c=Ke}finally{try{r||null==l.return||l.return()}finally{if(n)throw c}}return t},be=function(e){return e.length},Oe=function(){return Object(he.loadCSS)("https://use.fontawesome.com/releases/v5.1.0/css/all.css",document.querySelector("#insertion-point-jss"))},Pe=(t(207),function(e){function a(){var e,t;Object(w.a)(this,a);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(t=Object(x.a)(this,(e=Object(V.a)(a)).call.apply(e,[this].concat(c)))).renderTracksList=function(e){var a=t.props,r=a.tracks,c=a.deleteTrack,o=a.classes;return n.a.createElement("ul",{className:"tracks-list"},r[e].data.map(function(a,t){return n.a.createElement("li",{key:t,className:"tracks-list__item"},n.a.createElement("span",{className:"tracks-list__title"},"".concat(t+1,". ").concat(a.track.name)),n.a.createElement(Q.a,{color:"secondary","aria-label":"Delete",className:"".concat(o.button," button--delete"),onClick:function(){return c(e,t)}},n.a.createElement(ae.a,null)))}))},t}return Object(M.a)(a,e),Object(D.a)(a,[{key:"componentDidMount",value:function(){Oe()}},{key:"swithToDjControllerPage",value:function(){ve(this.props)&&this.props.history.push(T.DJ_CONTROLLER_PAGE_ROUTE)}},{key:"render",value:function(){var e=this,a=this.props,t=a.tracks,c=a.tracksUploadStart,o=a.tracksUploadEnd,l=a.classes,s=ve(this.props);return n.a.createElement(r.Fragment,null,T.PLAYERS.map(function(a,r){return n.a.createElement(J.a,{item:!0,xs:12,sm:6,md:4,key:r},n.a.createElement(X.a,{className:"paper"},n.a.createElement(le,{playerId:a.id,tracks:t,tracksUploadStart:c,tracksUploadEnd:o}),n.a.createElement("span",{className:"player__title"},"Player #",a.id),t[a.id].data.length>0&&e.renderTracksList(a.id)))}),n.a.createElement("div",{className:"button-wrap"},n.a.createElement(W.a,{disabled:!s,onClick:function(){return e.swithToDjControllerPage()},className:"".concat(l.button&&(s?"pulse":null)," button--link"),variant:"contained",color:"primary"},"to dj controller",n.a.createElement($.a,{className:"fas fa-chevron-right"}))))}}]),a}(r.Component)),_e=Object(l.b)(function(e){return{tracks:e.tracks}},function(e){return Object(i.b)({tracksUploadStart:se,tracksUploadEnd:ie,deleteTrack:ue},e)})(Object(z.withStyles)(function(e){return{button:{borderRadius:0}}})(Pe)),Ce=t(41),Se=t.n(Ce),ge=t(114),je=t.n(ge),Ne=t(112),Re=t.n(Ne),Ae=t(113),Ie=t.n(Ae),Ue=t(111),Le=t.n(Ue),we=(t(237),function(e){function a(){var e,t;Object(w.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(t=Object(x.a)(this,(e=Object(V.a)(a)).call.apply(e,[this].concat(n)))).changeCurrentTrackPosition=function(e,a){var r=t.props,n=r.tracksData,c=r.currentTrackIndex,o=r.playerId,l=r.setCurrentTrackPosition;n[c].audio.currentTime=a*n[c].audio.duration/100,l(o,a)},t.converterFromSecToMin=function(e){return"".concat(parseInt(e/60,10),":").concat(e%60<10?"0"+parseInt(e%60,10):parseInt(e%60,10))},t.changeCurrentTrackSpeed=function(e){var a=t.props,r=a.tracksData,n=a.playerId,c=a.currentTrackIndex,o=a.setCurrentTrackSpeed;r[c].audio.playbackRate=e.target.value,o(n,e.target.value)},t.oneTrackFromStart=function(){var e=t.props,a=e.players,r=e.playerId,n=e.currentTrackIndex,c=e.oneTrackToStartPosition,o=e.oneTrackPlay;a[r].isPlaying?(c(r,n),setTimeout(function(){return o()})):c(r,n)},t}return Object(M.a)(a,e),Object(D.a)(a,[{key:"componentDidMount",value:function(){Oe()}},{key:"renderCurrentTrackData",value:function(){var e=this.props,a=e.tracksData,t=e.players,r=e.playerId,c=e.currentTrackIndex,o=be(a);return n.a.createElement("div",null,n.a.createElement("div",{className:"track__title"},n.a.createElement("p",null,!!o&&a[c].track.name),t[r].isPlaying&&n.a.createElement(ne.a,{type:"Audio",color:"rgb(0, 44, 59)",height:"40",width:"50"})),n.a.createElement("p",{className:"track__number"},o?"It's track #".concat(c+1," of ").concat(o," track").concat(o>1?"s":""):"Player list is empty"))}},{key:"render",value:function(){var e=this,a=this.props,t=a.players,c=a.playerId,o=a.tracksData,l=a.currentTrackIndex,s=a.oneTrackPlay,i=a.oneTrackPause,u=a.switchTrack,d=a.changeCurrentTrackVolume,m=be(o),p=t[c].currentTrackPosition,k=t[c].currentTrackVolume;return n.a.createElement(r.Fragment,null,n.a.createElement("img",{className:"track__img",src:Le.a,alt:"dj-girl"}),this.renderCurrentTrackData(),!!m&&n.a.createElement("p",{className:"track__current-position"},n.a.createElement("span",null,this.converterFromSecToMin(p*o[l].audio.duration*.01)),n.a.createElement("span",null,this.converterFromSecToMin(o[l].audio.duration))),n.a.createElement(Se.a,{className:"slider",disabled:!m,direction:"horizontal",onChange:this.changeCurrentTrackPosition,max:100,min:0,step:1,value:p}),n.a.createElement("div",{className:"buttons-wrapper"},n.a.createElement(W.a,{disabled:!m||p<.01,onClick:function(){return e.oneTrackFromStart()},className:"button--circle"},n.a.createElement($.a,{className:"fas fa-step-backward"})),n.a.createElement(W.a,{disabled:m<2,onClick:function(){return u(c,"previous")},className:"button--circle"},n.a.createElement($.a,{className:"fas fa-backward"})),n.a.createElement(W.a,{disabled:!m,onClick:function(){return s()},className:"button--circle"},n.a.createElement($.a,{className:"fas fa-play"})),n.a.createElement(W.a,{disabled:!m,onClick:function(){return i()},className:"button--circle"},n.a.createElement($.a,{className:"fas fa-pause"})),n.a.createElement(W.a,{disabled:m<2,onClick:function(){return u(c,"next")},className:"button--circle"},n.a.createElement($.a,{className:"fas fa-forward"}))),n.a.createElement("div",{className:"track-volume-speed-container"},n.a.createElement("div",{className:"track-volume-speed-container__volume"},n.a.createElement("p",{className:"track__current-volume"},n.a.createElement("span",null,"Volume "),n.a.createElement("span",null,"".concat(Math.round(k),"%"))),n.a.createElement(Se.a,{className:"slider",disabled:!m,direction:"horizontal",onChange:d,max:100,min:0,value:k})),n.a.createElement("div",{className:"track-volume-speed-container__speed"},n.a.createElement("p",{className:"track__current-speed"},"Speed "),n.a.createElement(Re.a,{disabled:!m},n.a.createElement(Ie.a,{className:"select",value:t[c].currentTrackSpeed,onChange:this.changeCurrentTrackSpeed,displayEmpty:!0,name:"speed"},T.PLAYBACK_RATE_VALUES.map(function(e,a){return n.a.createElement(je.a,{key:a,value:e},e)}))))))}}]),a}(r.Component)),De=(t(296),function(e){function a(){var e,t;Object(w.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(t=Object(x.a)(this,(e=Object(V.a)(a)).call.apply(e,[this].concat(n)))).switchTrack=function(e,a){var r=t.props,n=r.tracks,c=r.players,o=r.setCurrentTrackIndex,l=n[e].data,s=c[e].currentTrackIndex;t.oneTrackToStartPosition(e,s);var i=s,u=l.length;u>1&&(a.includes("next")&&(i=i<u-1?i+1:0),a.includes("previous")&&(i=i>0?i-1:u-1)),o(e,i),c[e].isPlaying&&setTimeout(function(){return t.oneTrackPlay(e,i)})},t.oneTrackToStartPosition=function(e,a){var r=t.props,n=r.tracks,c=r.setCurrentTrackPosition;if(t.oneTrackPause(e,a),be(n[e].data)>0){var o=n[e].data[a].audio;0!==o.currentTime&&(o.currentTime=0,c(e,0))}},t}return Object(M.a)(a,e),Object(D.a)(a,[{key:"componentDidMount",value:function(){Oe()}},{key:"componentWillUnmount",value:function(){this.allTracksToStartPosition(),this.props.resetPlayers()}},{key:"switchToUploadPage",value:function(){this.props.history.push(T.UPLOAD_PAGE_ROUTE)}},{key:"oneTrackPlay",value:function(e,a){var t=this,r=this.props,n=r.tracks,c=r.players,o=r.toPlay,l=r.setCurrentTrackPosition;if(be(n[e].data)>0&&!c[e].isPlaying){var s=n[e].data[a].audio;this["".concat(e,"currentTimeInterval")]=setInterval(function(){var a=t;l(e,100*s.currentTime/s.duration),100===Math.floor(a.props.players[e].currentTrackPosition)&&t.switchTrack(e,"next")},500),s.playbackRate=c[e].currentTrackSpeed,s.volume=c[e].currentTrackVolume/100*(c.commonVolume/100),o(e),s.play()}}},{key:"allTracksPlay",value:function(){var e=this;T.PLAYERS.forEach(function(a){e.oneTrackPlay(a.id,e.props.players[a.id].currentTrackIndex)})}},{key:"oneTrackPause",value:function(e,a){var t=this.props,r=t.tracks,n=t.players,c=t.toPause;be(r[e].data)>0&&n[e].isPlaying&&(r[e].data[a].audio.pause(),c(e),clearInterval(this["".concat(e,"currentTimeInterval")]))}},{key:"allTracksPause",value:function(){var e=this;T.PLAYERS.forEach(function(a){e.oneTrackPause(a.id,e.props.players[a.id].currentTrackIndex)})}},{key:"allTracksToStartPosition",value:function(){var e=this;T.PLAYERS.forEach(function(a){e.oneTrackToStartPosition(a.id,e.props.players[a.id].currentTrackIndex)})}},{key:"changeOneTrackVolume",value:function(e,a){var t=this.props,r=t.tracks,n=t.players;(0,t.setCurrentTrackVolume)(a,e),r[a].data[n[a].currentTrackIndex].audio.volume=e/100*(n.commonVolume/100)}},{key:"changeCommonVolume",value:function(e){var a=this.props,t=a.tracks,r=a.players;(0,a.setCommonVolume)(e),T.PLAYERS.forEach(function(a){r[a.id].isPlaying&&(t[a.id].data[r[a.id].currentTrackIndex].audio.volume=r[a.id].currentTrackVolume/100*(e/100))})}},{key:"render",value:function(){var e=this,a=this.props,t=a.tracks,c=a.players,o=a.setCurrentTrackPosition,l=a.setCurrentTrackSpeed;return n.a.createElement(r.Fragment,null,T.PLAYERS.map(function(a,r){return n.a.createElement(J.a,{item:!0,xs:12,sm:6,md:4,key:r},n.a.createElement(X.a,{className:"paper"},n.a.createElement(we,{key:r,tracksData:t[a.id].data,players:c,playerId:a.id,currentTrackIndex:c[a.id].currentTrackIndex,oneTrackToStartPosition:e.oneTrackToStartPosition,switchTrack:e.switchTrack,setCurrentTrackPosition:o,setCurrentTrackSpeed:l,oneTrackPlay:function(){return e.oneTrackPlay(a.id,c[a.id].currentTrackIndex)},oneTrackPause:function(){return e.oneTrackPause(a.id,c[a.id].currentTrackIndex)},changeCurrentTrackVolume:function(t,r){return e.changeOneTrackVolume(r,a.id)}})))}),n.a.createElement("div",{className:"common-controller-container"},n.a.createElement("div",{className:"common-controller__buttons"},n.a.createElement(W.a,{className:"button--circle",onClick:function(){return e.allTracksPlay()}},n.a.createElement($.a,{className:"fas fa-play"})),n.a.createElement(W.a,{className:"button--circle",onClick:function(){return e.allTracksPause()}},n.a.createElement($.a,{className:"fas fa-pause"}))),n.a.createElement("div",{className:"common-controller__slider"},n.a.createElement("p",{className:"common-controller__volume"},n.a.createElement("span",null,"Volume"),n.a.createElement("span",null,"".concat(Math.round(c.commonVolume),"%"))),n.a.createElement(Se.a,{onChange:function(a,t){return e.changeCommonVolume(t)},max:100,min:0,value:c.commonVolume}))),n.a.createElement("div",{className:"button-wrap"},n.a.createElement(W.a,{className:"button--link pulse",variant:"contained",color:"primary",onClick:function(){return e.switchToUploadPage()}},n.a.createElement($.a,{className:"fas fa-chevron-left"}),"to upload page")))}}]),a}(r.Component)),xe=Object(l.b)(function(e){return{tracks:e.tracks,players:e.players}},function(e){return Object(i.b)({resetPlayers:me,toPlay:pe,toPause:ke,setCurrentTrackIndex:de,setCurrentTrackPosition:Te,setCurrentTrackSpeed:Ee,setCurrentTrackVolume:fe,setCommonVolume:ye},e)})(De),Ve=(t(298),function(e){function a(){return Object(w.a)(this,a),Object(x.a)(this,Object(V.a)(a).apply(this,arguments))}return Object(M.a)(a,e),Object(D.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"main-wrapper"},n.a.createElement(J.a,{container:!0,spacing:24},n.a.createElement(K.a,null,n.a.createElement(Y.a,{exact:!0,path:T.UPLOAD_PAGE_ROUTE,component:_e}),n.a.createElement(Y.a,{exact:!0,path:T.DJ_CONTROLLER_PAGE_ROUTE,render:function(a){return ve(e.props.store.getState())?n.a.createElement(xe,a):n.a.createElement(F.a,{to:T.UPLOAD_PAGE_ROUTE})}}),n.a.createElement(F.a,{to:T.UPLOAD_PAGE_ROUTE}))))}}]),a}(r.Component)),Me=(t(300),document.getElementById("root"));o.a.render(n.a.createElement(l.a,{store:L},n.a.createElement(s.a,{history:A},n.a.createElement(Ve,{store:L}))),Me)}},[[117,2,1]]]);
//# sourceMappingURL=main.4acc6c33.chunk.js.map